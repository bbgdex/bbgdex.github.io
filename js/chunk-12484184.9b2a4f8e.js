(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-12484184"],{1146:function(t,e,i){},"1a04":function(t,e,i){},"30f0":function(t,e,i){"use strict";i("fef0")},"482d":function(t,e,i){"use strict";function s(t,e,i){return Math.min(Math.max(t,e),i)}function n(t,e,i){var s=t.indexOf(e),n="";return-1===s?t:"-"===e&&0!==s?t.slice(0,s):("."===e&&t.match(/^(\.|-\.)/)&&(n=s?"-0":"0"),n+t.slice(0,s+1)+t.slice(s).replace(i,""))}function a(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),t=e?n(t,".",/\./g):t.split(".")[0],t=i?n(t,"-",/-/g):t.replace(/-/,"");var s=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(s,"")}function r(t,e){var i=Math.pow(10,10);return Math.round((t+e)*i)/i}i.d(e,"c",(function(){return s})),i.d(e,"b",(function(){return a})),i.d(e,"a",(function(){return r}))},"6cbb":function(t,e,i){"use strict";i("c1a0")},ac1e:function(t,e,i){"use strict";i("68ef"),i("e3b3")},bab4:function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t._self._c;t._self._setupProxy;return e("van-popup",{attrs:{round:"",position:"bottom"},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}},[e("div",{staticClass:"search-token"},[e("van-search",{attrs:{"show-action":"",placeholder:t.$t("searchTokens.text1"),"action-text":t.$t("searchTokens.text2"),background:"#fff"},on:{input:t.onInput,cancel:t.close},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),e("span",{staticClass:"title"},[t._v(t._s(t.$t("searchTokens.text3")))]),e("div",{staticClass:"referral-tokens"},[e("div",t._l(t.hotList,(function(i){return e("div",{key:i.address,on:{click:function(e){return t.select(i)}}},[e("img",{attrs:{src:i.logoURI}}),e("span",{domProps:{textContent:t._s(i.symbol)}})])})),0)]),e("span",{staticClass:"title"},[t._v(t._s(t.$t("searchTokens.text4")))]),e("div",{staticClass:"all-tokens"},[e("van-list",{directives:[{name:"show",rawName:"v-show",value:!t.empty&&!t.searching,expression:"!empty && !searching"}],attrs:{finished:t.finished,"finished-text":t.$t("searchTokens.text5")},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.allTokens,(function(i){return e("div",{key:i.address,on:{click:function(e){return t.select(i)}}},[e("div",[e("img",{attrs:{src:i.logoURI}}),e("div",[e("span",{domProps:{textContent:t._s(i.symbol)}}),e("span",{domProps:{textContent:t._s(i.name)}})])]),e("div",[void 0!==i.balance?e("span",[t._v(t._s(i.balance))]):e("span"),e("span",{domProps:{textContent:t._s(`${i.address.slice(0,5)}...${i.address.slice(-5)}`)}})])])})),0),e("div",{directives:[{name:"show",rawName:"v-show",value:t.empty&&!t.searching,expression:"empty && !searching"}],staticClass:"empty"},[e("img",{attrs:{src:i("42a0")}}),e("span",[t._v(t._s(t.$t("searchTokens.text6")))])]),e("div",{directives:[{name:"show",rawName:"v-show",value:t.searching,expression:"searching"}],staticClass:"loading"},[e("van-loading",{attrs:{type:"spinner",color:"#3C94FF","text-color":"#404D66",vertical:""}},[t._v(t._s(t.$t("searchTokens.text7")))])],1)],1)],1)])},n=[],a=(i("ac1e"),i("543e")),r=(i("68ef"),i("e3b3"),i("c0c2"),i("d282"));function o(t){var e=window.getComputedStyle(t),i="none"===e.display,s=null===t.offsetParent&&"fixed"!==e.position;return i||s}var l=i("a8c1"),c=i("5fbe"),h=Object(r["a"])("list"),u=h[0],d=h[1],f=h[2],g=u({mixins:[Object(c["a"])((function(t){this.scroller||(this.scroller=Object(l["b"])(this.$el)),t(this.scroller,"scroll",this.check)}))],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:[Number,String],default:300},direction:{type:String,default:"down"}},data:function(){return{innerLoading:this.loading}},updated:function(){this.innerLoading=this.loading},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var t=this;this.$nextTick((function(){if(!(t.innerLoading||t.finished||t.error)){var e,i=t.$el,s=t.scroller,n=t.offset,a=t.direction;e=s.getBoundingClientRect?s.getBoundingClientRect():{top:0,bottom:s.innerHeight};var r=e.bottom-e.top;if(!r||o(i))return!1;var l=!1,c=t.$refs.placeholder.getBoundingClientRect();l="up"===a?e.top-c.top<=n:c.bottom-e.bottom<=n,l&&(t.innerLoading=!0,t.$emit("input",!0),t.$emit("load"))}}))},clickErrorText:function(){this.$emit("update:error",!1),this.check()},genLoading:function(){var t=this.$createElement;if(this.innerLoading&&!this.finished)return t("div",{key:"loading",class:d("loading")},[this.slots("loading")||t(a["a"],{attrs:{size:"16"}},[this.loadingText||f("loading")])])},genFinishedText:function(){var t=this.$createElement;if(this.finished){var e=this.slots("finished")||this.finishedText;if(e)return t("div",{class:d("finished-text")},[e])}},genErrorText:function(){var t=this.$createElement;if(this.error){var e=this.slots("error")||this.errorText;if(e)return t("div",{on:{click:this.clickErrorText},class:d("error-text")},[e])}}},render:function(){var t=arguments[0],e=t("div",{ref:"placeholder",key:"placeholder",class:d("placeholder")});return t("div",{class:d(),attrs:{role:"feed","aria-busy":this.innerLoading}},["down"===this.direction?this.slots():e,this.genLoading(),this.genFinishedText(),this.genErrorText(),"up"===this.direction?this.slots():e])}}),v=(i("9d70"),i("3743"),i("1a04"),i("1146"),i("f032"),i("2638")),m=i.n(v),p=i("c31d"),b=i("ba31"),k=i("1325"),y=i("a142");function x(){return!y["g"]&&/ios|iphone|ipad|ipod/.test(navigator.userAgent.toLowerCase())}var w=x();function $(){w&&Object(l["c"])(Object(l["a"])())}var C=i("482d"),T=i("ea8e"),S=i("ad06"),j=i("48f4"),O={icon:String,size:String,center:Boolean,isLink:Boolean,required:Boolean,iconPrefix:String,titleStyle:null,titleClass:null,valueClass:null,labelClass:null,title:[Number,String],value:[Number,String],label:[Number,String],arrowDirection:String,border:{type:Boolean,default:!0},clickable:{type:Boolean,default:null}},F=Object(r["a"])("cell"),B=F[0],I=F[1];function P(t,e,i,s){var n,a=e.icon,r=e.size,o=e.title,l=e.label,c=e.value,h=e.isLink,u=i.title||Object(y["c"])(o);function d(){var s=i.label||Object(y["c"])(l);if(s)return t("div",{class:[I("label"),e.labelClass]},[i.label?i.label():l])}function f(){if(u)return t("div",{class:[I("title"),e.titleClass],style:e.titleStyle},[i.title?i.title():t("span",[o]),d()])}function g(){var s=i.default||Object(y["c"])(c);if(s)return t("div",{class:[I("value",{alone:!u}),e.valueClass]},[i.default?i.default():t("span",[c])])}function v(){return i.icon?i.icon():a?t(S["a"],{class:I("left-icon"),attrs:{name:a,classPrefix:e.iconPrefix}}):void 0}function p(){var s=i["right-icon"];if(s)return s();if(h){var n=e.arrowDirection;return t(S["a"],{class:I("right-icon"),attrs:{name:n?"arrow-"+n:"arrow"}})}}function k(t){Object(b["a"])(s,"click",t),Object(j["a"])(s)}var x=null!=(n=e.clickable)?n:h,w={clickable:x,center:e.center,required:e.required,borderless:!e.border};return r&&(w[r]=r),t("div",m()([{class:I(w),attrs:{role:x?"button":null,tabindex:x?0:null},on:{click:k}},Object(b["b"])(s)]),[v(),f(),g(),p(),null==i.extra?void 0:i.extra()])}P.props=Object(p["a"])({},O,j["b"]);var L=B(P),M=Object(r["a"])("field"),q=M[0],E=M[1],R=q({inheritAttrs:!1,provide:function(){return{vanField:this}},inject:{vanForm:{default:null}},props:Object(p["a"])({},O,{name:String,rules:Array,disabled:{type:Boolean,default:null},readonly:{type:Boolean,default:null},autosize:[Boolean,Object],leftIcon:String,rightIcon:String,clearable:Boolean,formatter:Function,maxlength:[Number,String],labelWidth:[Number,String],labelClass:null,labelAlign:String,inputAlign:String,placeholder:String,errorMessage:String,errorMessageAlign:String,showWordLimit:Boolean,value:{type:[Number,String],default:""},type:{type:String,default:"text"},error:{type:Boolean,default:null},colon:{type:Boolean,default:null},clearTrigger:{type:String,default:"focus"},formatTrigger:{type:String,default:"onChange"}}),data:function(){return{focused:!1,validateFailed:!1,validateMessage:""}},watch:{value:function(){this.updateValue(this.value),this.resetValidation(),this.validateWithTrigger("onChange"),this.$nextTick(this.adjustSize)}},mounted:function(){this.updateValue(this.value,this.formatTrigger),this.$nextTick(this.adjustSize),this.vanForm&&this.vanForm.addField(this)},beforeDestroy:function(){this.vanForm&&this.vanForm.removeField(this)},computed:{showClear:function(){var t=this.getProp("readonly");if(this.clearable&&!t){var e=Object(y["c"])(this.value)&&""!==this.value,i="always"===this.clearTrigger||"focus"===this.clearTrigger&&this.focused;return e&&i}},showError:function(){return null!==this.error?this.error:!!(this.vanForm&&this.vanForm.showError&&this.validateFailed)||void 0},listeners:function(){return Object(p["a"])({},this.$listeners,{blur:this.onBlur,focus:this.onFocus,input:this.onInput,click:this.onClickInput,keypress:this.onKeypress})},labelStyle:function(){var t=this.getProp("labelWidth");if(t)return{width:Object(T["a"])(t)}},formValue:function(){return this.children&&(this.$scopedSlots.input||this.$slots.input)?this.children.value:this.value}},methods:{focus:function(){this.$refs.input&&this.$refs.input.focus()},blur:function(){this.$refs.input&&this.$refs.input.blur()},runValidator:function(t,e){return new Promise((function(i){var s=e.validator(t,e);if(Object(y["f"])(s))return s.then(i);i(s)}))},isEmptyValue:function(t){return Array.isArray(t)?!t.length:0!==t&&!t},runSyncRule:function(t,e){return(!e.required||!this.isEmptyValue(t))&&!(e.pattern&&!e.pattern.test(t))},getRuleMessage:function(t,e){var i=e.message;return Object(y["d"])(i)?i(t,e):i},runRules:function(t){var e=this;return t.reduce((function(t,i){return t.then((function(){if(!e.validateFailed){var t=e.formValue;return i.formatter&&(t=i.formatter(t,i)),e.runSyncRule(t,i)?i.validator?e.runValidator(t,i).then((function(s){!1===s&&(e.validateFailed=!0,e.validateMessage=e.getRuleMessage(t,i))})):void 0:(e.validateFailed=!0,void(e.validateMessage=e.getRuleMessage(t,i)))}}))}),Promise.resolve())},validate:function(t){var e=this;return void 0===t&&(t=this.rules),new Promise((function(i){t||i(),e.resetValidation(),e.runRules(t).then((function(){e.validateFailed?i({name:e.name,message:e.validateMessage}):i()}))}))},validateWithTrigger:function(t){if(this.vanForm&&this.rules){var e=this.vanForm.validateTrigger===t,i=this.rules.filter((function(i){return i.trigger?i.trigger===t:e}));i.length&&this.validate(i)}},resetValidation:function(){this.validateFailed&&(this.validateFailed=!1,this.validateMessage="")},updateValue:function(t,e){void 0===e&&(e="onChange"),t=Object(y["c"])(t)?String(t):"";var i=this.maxlength;if(Object(y["c"])(i)&&t.length>i&&(t=this.value&&this.value.length===+i?this.value:t.slice(0,i)),"number"===this.type||"digit"===this.type){var s="number"===this.type;t=Object(C["b"])(t,s,s)}this.formatter&&e===this.formatTrigger&&(t=this.formatter(t));var n=this.$refs.input;n&&t!==n.value&&(n.value=t),t!==this.value&&this.$emit("input",t)},onInput:function(t){t.target.composing||this.updateValue(t.target.value)},onFocus:function(t){this.focused=!0,this.$emit("focus",t),this.$nextTick(this.adjustSize),this.getProp("readonly")&&this.blur()},onBlur:function(t){this.getProp("readonly")||(this.focused=!1,this.updateValue(this.value,"onBlur"),this.$emit("blur",t),this.validateWithTrigger("onBlur"),this.$nextTick(this.adjustSize),$())},onClick:function(t){this.$emit("click",t)},onClickInput:function(t){this.$emit("click-input",t)},onClickLeftIcon:function(t){this.$emit("click-left-icon",t)},onClickRightIcon:function(t){this.$emit("click-right-icon",t)},onClear:function(t){Object(k["c"])(t),this.$emit("input",""),this.$emit("clear",t)},onKeypress:function(t){var e=13;if(t.keyCode===e){var i=this.getProp("submitOnEnter");i||"textarea"===this.type||Object(k["c"])(t),"search"===this.type&&this.blur()}this.$emit("keypress",t)},adjustSize:function(){var t=this.$refs.input;if("textarea"===this.type&&this.autosize&&t){var e=Object(l["a"])();t.style.height="auto";var i=t.scrollHeight;if(Object(y["e"])(this.autosize)){var s=this.autosize,n=s.maxHeight,a=s.minHeight;n&&(i=Math.min(i,n)),a&&(i=Math.max(i,a))}i&&(t.style.height=i+"px",Object(l["c"])(e))}},genInput:function(){var t=this.$createElement,e=this.type,i=this.getProp("disabled"),s=this.getProp("readonly"),n=this.slots("input"),a=this.getProp("inputAlign");if(n)return t("div",{class:E("control",[a,"custom"]),on:{click:this.onClickInput}},[n]);var r={ref:"input",class:E("control",a),domProps:{value:this.value},attrs:Object(p["a"])({},this.$attrs,{name:this.name,disabled:i,readonly:s,placeholder:this.placeholder}),on:this.listeners,directives:[{name:"model",value:this.value}]};if("textarea"===e)return t("textarea",m()([{},r]));var o,l=e;return"number"===e&&(l="text",o="decimal"),"digit"===e&&(l="tel",o="numeric"),t("input",m()([{attrs:{type:l,inputmode:o}},r]))},genLeftIcon:function(){var t=this.$createElement,e=this.slots("left-icon")||this.leftIcon;if(e)return t("div",{class:E("left-icon"),on:{click:this.onClickLeftIcon}},[this.slots("left-icon")||t(S["a"],{attrs:{name:this.leftIcon,classPrefix:this.iconPrefix}})])},genRightIcon:function(){var t=this.$createElement,e=this.slots,i=e("right-icon")||this.rightIcon;if(i)return t("div",{class:E("right-icon"),on:{click:this.onClickRightIcon}},[e("right-icon")||t(S["a"],{attrs:{name:this.rightIcon,classPrefix:this.iconPrefix}})])},genWordLimit:function(){var t=this.$createElement;if(this.showWordLimit&&this.maxlength){var e=(this.value||"").length;return t("div",{class:E("word-limit")},[t("span",{class:E("word-num")},[e]),"/",this.maxlength])}},genMessage:function(){var t=this.$createElement;if(!this.vanForm||!1!==this.vanForm.showErrorMessage){var e=this.errorMessage||this.validateMessage;if(e){var i=this.getProp("errorMessageAlign");return t("div",{class:E("error-message",i)},[e])}}},getProp:function(t){return Object(y["c"])(this[t])?this[t]:this.vanForm&&Object(y["c"])(this.vanForm[t])?this.vanForm[t]:void 0},genLabel:function(){var t=this.$createElement,e=this.getProp("colon")?":":"";return this.slots("label")?[this.slots("label"),e]:this.label?t("span",[this.label+e]):void 0}},render:function(){var t,e=arguments[0],i=this.slots,s=this.getProp("disabled"),n=this.getProp("labelAlign"),a={icon:this.genLeftIcon},r=this.genLabel();r&&(a.title=function(){return r});var o=this.slots("extra");return o&&(a.extra=function(){return o}),e(L,{attrs:{icon:this.leftIcon,size:this.size,center:this.center,border:this.border,isLink:this.isLink,required:this.required,clickable:this.clickable,titleStyle:this.labelStyle,valueClass:E("value"),titleClass:[E("label",n),this.labelClass],arrowDirection:this.arrowDirection},scopedSlots:a,class:E((t={error:this.showError,disabled:s},t["label-"+n]=n,t["min-height"]="textarea"===this.type&&!this.autosize,t)),on:{click:this.onClick}},[e("div",{class:E("body")},[this.genInput(),this.showClear&&e(S["a"],{attrs:{name:"clear"},class:E("clear"),on:{touchstart:this.onClear}}),this.genRightIcon(),i("button")&&e("div",{class:E("button")},[i("button")])]),this.genWordLimit(),this.genMessage()])}}),_=Object(r["a"])("search"),A=_[0],W=_[1],z=_[2];function V(t,e,i,s){function n(){if(i.label||e.label)return t("div",{class:W("label")},[i.label?i.label():e.label])}function a(){if(e.showAction)return t("div",{class:W("action"),attrs:{role:"button",tabindex:"0"},on:{click:n}},[i.action?i.action():e.actionText||z("cancel")]);function n(){i.action||(Object(b["a"])(s,"input",""),Object(b["a"])(s,"cancel"))}}var r={attrs:s.data.attrs,on:Object(p["a"])({},s.listeners,{keypress:function(t){13===t.keyCode&&(Object(k["c"])(t),Object(b["a"])(s,"search",e.value)),Object(b["a"])(s,"keypress",t)}})},o=Object(b["b"])(s);return o.attrs=void 0,t("div",m()([{class:W({"show-action":e.showAction}),style:{background:e.background}},o]),[null==i.left?void 0:i.left(),t("div",{class:W("content",e.shape)},[n(),t(R,m()([{attrs:{type:"search",border:!1,value:e.value,leftIcon:e.leftIcon,rightIcon:e.rightIcon,clearable:e.clearable,clearTrigger:e.clearTrigger},scopedSlots:{"left-icon":i["left-icon"],"right-icon":i["right-icon"]}},r]))]),a()])}V.props={value:String,label:String,rightIcon:String,actionText:String,background:String,showAction:Boolean,clearTrigger:String,shape:{type:String,default:"square"},clearable:{type:Boolean,default:!0},leftIcon:{type:String,default:"search"}};var N=A(V),D=(i("8a58"),i("e41f")),H=(i("caad"),i("b9cc"));let U={};var J={components:{[D["a"].name]:D["a"],[N.name]:N,[g.name]:g,[a["a"].name]:a["a"]},data(){return{value:"",show:!1,hotList:[],allTokens:[],cacheTokens:[],loading:!1,finished:!1,empty:!1,searching:!1,who:"",start:0,end:10}},created(){fetch("https://chainconfig.github.io/bsc/bbgtokens.json").then(t=>t.json()).then(t=>{this.hotList=t.hot,U=t})},methods:{onInput(){if(""===this.value)return this.empty=!1,this.start=10,this.end=20,this.searching=!1,this.allTokens=this.cacheTokens,!1;if(this.searching)return!1;this.searching=!0;const t=setTimeout(async()=>{if(this.value.length>0){const t=this.$web3.utils.isAddress(this.value),e=await(t?this.getTokenByAddress():this.getTokenBySymbol());this.empty=0===e.length,this.allTokens=e,this.searching=!1}clearTimeout(t)},500)},getTokenBySymbol(){return new Promise(t=>{const e=U.all.filter(t=>t.symbol.includes(this.value.toUpperCase()));if(e.length>0){const i=new this.$web3.BatchRequest;for(let t=0;t<e.length;t++){const s=new this.$web3.eth.Contract(H,e[t].address);i.add(s.methods.balanceOf(this.$address).call.request({from:this.$address}))}i.requestManager.sendBatch(i.requests,(i,s)=>{i||(s.forEach((t,i)=>{e[i].balance=0===i?("string"===typeof t?t:t.result).fromWei(e[i].decimals).toFixed(4):t.result.fromWei(e[i].decimals).toFixed(4)}),t(e))})}else t([])})},getTokenByAddress(){return new Promise(t=>{const e=U.all.filter(t=>t.address.toLowerCase()===this.value.toLowerCase()),i=new this.$web3.BatchRequest;if(e.length>0){for(let t=0;t<e.length;t++){const s=new this.$web3.eth.Contract(H,e[t].address);i.add(s.methods.balanceOf(this.$address).call.request({from:this.$address}))}i.requestManager.sendBatch(i.requests,(i,s)=>{i||(s.forEach((t,i)=>{e[i].balance=0===i?("string"===typeof t?t:t.result).fromWei(e[i].decimals).toFixed(4):t.result.fromWei(e[i].decimals).toFixed(4)}),t(e))})}else{const e=new this.$web3.eth.Contract(H,this.value);i.add(e.methods.name().call.request({from:this.$address})),i.add(e.methods.symbol().call.request({from:this.$address})),i.add(e.methods.decimals().call.request({from:this.$address})),i.add(e.methods.balanceOf(this.$address).call.request({from:this.$address})),i.requestManager.sendBatch(i.requests,(e,i)=>{if(!e){const e=("string"===typeof i[0]?i[0]:i[0].result).decode(["string"]),s=i[1].result.decode(["string"]),n=i[2].result.decode(["uint8"]),a=i[3].result.decode(["uint256"]).fromWei(n).toFixed(4);t([{name:e,symbol:s,decimals:n,balance:a,address:this.value,chainId:56,logoURI:"https://chainconfig.github.io/bsc/tokens/unknown.svg"}])}})}})},open(t){this.show=!0,this.who=t},close(){this.show=!1},select(t){this.$emit("select",t,this.who),this.show=!1},async onLoad(){if(this.end>=U.all.length&&this.start>=U.all.length)return this.loading=!1,this.finished=!0,!1;const t=U.all.slice(this.start,this.end),e=new this.$web3.BatchRequest;for(let i=0;i<t.length;i++){const s=new this.$web3.eth.Contract(H,t[i].address);e.add(s.methods.balanceOf(this.$address).call.request({from:this.$address}))}e.requestManager.sendBatch(e.requests,(e,i)=>{e||(i.forEach((e,i)=>{t[i].balance=0===i?("string"===typeof e?e:e.result).fromWei(t[i].decimals).toFixed(4):e.result.fromWei(t[i].decimals).toFixed(4)}),0===this.start&&10===this.end&&(this.cacheTokens=t),this.allTokens=this.allTokens.concat(t),this.loading=!1,this.start=this.end,this.end+=10)})}}},K=J,G=K,Q=(i("30f0"),i("6cbb"),i("2877")),X=Object(Q["a"])(G,s,n,!1,null,"eaf3cf94",null);e["default"]=X.exports},c0c2:function(t,e,i){},c1a0:function(t,e,i){},f032:function(t,e,i){},fef0:function(t,e,i){}}]);